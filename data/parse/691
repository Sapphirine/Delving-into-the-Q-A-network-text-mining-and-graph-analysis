simpl hack incorpor word order exist bag word model implement treat phrase frequent occur bi gram e g new york unit e singl word instead treat separ entiti ensur new york differ york new could also defin higher order word shingl n 3 4 etc could use lucen shinglefilt decompos document text shingl pre process step appli classifi decompos text import java io import org apach lucen analysi core import org apach lucen analysi import org apach lucen analysi shingl shinglefilt import org apach lucen analysi standard import org apach lucen util import org apach lucen analysi util import org apach lucen analysi tokenattribut chartermattribut import org apach lucen analysi charfilt import org apach lucen analysi core whitespacetoken class testanalyz extend analyz testanalyz super protect tokenstreamcompon createcompon string fieldnam reader reader string token tokenstream result null token sourc new whitespacetoken version lucen current reader result new shinglefilt sourc 2 2 return new tokenstreamcompon sourc result public class lucenetest public static void main string arg throw except testanalyz analyz new testanalyz tri tokenstream stream analyz tokenstream field new stringread sampl sentenc chartermattribut termatt stream addattribut chartermattribut class stream reset print token stream exhaust stream incrementtoken system println termatt tostr stream end stream close catch except ex ex printstacktrac